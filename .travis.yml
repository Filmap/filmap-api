language: php
php:
 - 5.5.9

before_script:
 - mv travis.env.php .env.testing.php
 - mysql -e 'create database fm_db;'
 - composer self-update
 - composer install --dev --prefer-source --no-interaction
 - chmod -R 777 storage
 - php artisan migrate:install --env=testing --no-interaction -vvv

script:
 - php artisan migrate --env=testing --no-interaction -vvv
 - php artisan db:seed --env=testing --no-interaction -vvv
 - phpunit
 - php artisan migrate:rollback --env=testing --no-interaction -vvv

matrix:
 fast_finish: true